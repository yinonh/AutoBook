{% extends 'book_cataloge/style.html' %}
{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<div class="container text-center">
    <h1>Book Card:</h1>
    <br>
    <br>

{% if user.adult %}
    {% if book in user.adult.FavouriteBooks.all %}
        <form method="POST" action="{% url 'book_card' book.id %}">
                        {% csrf_token %}
            <div class="container text-left">
            <button  name="notFavourite" type="submit"  style="background:transparent; border:none; color:transparent;" > <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16" style="float: left" color="red">
                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
            </svg>
        </button>
            </div>
        </form>
    {% else %}
        <form method="POST" action="{% url 'book_card' book.id %}">
                        {% csrf_token %}
            <div class="container text-left">
            <button  name="favourite" type="submit"  style="background:transparent; border:none; color:transparent;" > <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16" style="float: left" color="red">
              <path d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
            </svg>
            </button>
            </div>
        </form>
    {% endif %}
{% endif %}
</form>

    <br>
    <h2>{{ book.name }} by
    {{ book.author_name }}</h2>

    <br>
    <br>
    <img src="{{ book.image.url }}" height="220" width="180">
    <br>
    <br>
    <h2>Book Summary:</h2>
    {{ book.summary }}
    <br>
    <br>

{% if not user.is_superuser %}
    {% if not book.posses  %}
<form method="POST" action="{% url 'book_card' book.id %}" name="takeBook">
                        {% csrf_token %}
{% if request.user.is_authenticated %}
    {% if request.user.student %}
        {% if user.student.Security_Check == False %}
            <button type="button" class="btn btn-danger">
    <a href="{% url 'contact' %}" style="color: #FFFFFF">You Don't Have Security Check<br>Click To Contact Us</a>
</button>
        {% else %}
            <button class="btn btn-success" name="posses" onclick="myFunction()" type="submit">Take Book</button>
<script>
    function myFunction() {
      alert("This Book Will Wait you in the Library in the next exchanging day Thank You");
    }
    </script>
            {% endif %}
    {% elif request.user.adult %}
        {% if user.adult.Is_Banned == True %}
            <button type="button" class="btn btn-danger">
    <a href="{% url 'contact' %}" style="color: #FFFFFF">You Are Banned<br>Click To Contact Us</a>
        </button>
        {% else %}
             {% if user.adult.Security_Check == True %}
                        <button class="btn btn-success" name="posses" onclick="myFunction()" type="submit">Take Book</button>
<script>
    function myFunction() {
      alert("This Book Will Wait you in the Library in the next exchanging day Thank You");
    }
    </script>
    {% else %}


<button type="button" class="btn btn-danger">
    <a href="{% url 'contact' %}" style="color: #FFFFFF">You Don't Have Security Check<br>Click To Contact Us</a>
</button>
        {% endif %}
        {% endif %}
   {% endif %}
    {% else %}

                            <button class="btn btn-success" name="posses" onclick="myFunction1()" type="submit">Take Book</button>

    <script>
    function myFunction1() {
      alert("Please log in first");
    }
    </script>
    {% endif %}
</form>

    {% else %}
<button class="btn btn-danger">This Book Already Taken</button>
    {% endif %}
    {% elif book.posses %}
    <button class="btn btn-danger">Taken</button>
    {% else %}
    <button class="btn btn-success">Available</button>

{% endif %}

<a href={% url 'bookcataloge' %}><button class="btn btn-primary">Back</button></a>
    <br>
    <br><br>

</div>


{% if suggestions|length > 0 %}
    <div class="form-group col-12"><hr></div>
    <h2>People also liked:</h2>
        <div class="grid-container">
        {% for suggestion in suggestions %}
            <div class="grid-item">
                <div class="card" style="width: 10rem;">
                    <img src="{{ suggestion.image.url }}" class="card-img-top" alt="...">
                    <h5 class="card-title">{{ suggestion.name|truncatechars:15}}</h5>
                    <h5>by</h5>
                    <div class="card-body size"><h5>{{ suggestion.author_name }}</h5>
                    <a href="{% url 'book_card' suggestion.id %}" class="btn btn-info">overview</a>
                    </div>
                </div>
            </div>
        {% endfor %}
{% endif %}
</div>



{% endblock %}
